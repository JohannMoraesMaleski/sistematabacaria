<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IRONBOX - Sistema de Tabacaria</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Toggle Button -->
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>

            <!-- Header -->
            <header class="sidebar-header">
                <div class="header-content">
                    <h1 class="logo">
                        <span class="logo-full">IRONBOX</span>
                        <span class="logo-short">IB</span>
                    </h1>
                    <p class="subtitle">Sistema de Tabacaria e Distribuidora</p>
                </div>
            </header>

            <!-- Navigation -->
            <nav class="sidebar-navigation">
                <button class="nav-btn active" data-tab="dashboard" data-tooltip="Dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span class="nav-text">Dashboard</span>
                </button>
                <button class="nav-btn" data-tab="products" data-tooltip="Produtos">
                    <i class="fas fa-box"></i>
                    <span class="nav-text">Produtos</span>
                </button>
                <button class="nav-btn" data-tab="categories" data-tooltip="Categorias">
                    <i class="fas fa-tags"></i>
                    <span class="nav-text">Categorias</span>
                </button>
                <button class="nav-btn" data-tab="suppliers" data-tooltip="Fornecedores">
                    <i class="fas fa-truck"></i>
                    <span class="nav-text">Fornecedores</span>
                </button>
                <button class="nav-btn" data-tab="sales" data-tooltip="Vendas">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="nav-text">Vendas</span>
                </button>
                <button class="nav-btn" data-tab="tables" data-tooltip="Mesas">
                    <i class="fas fa-chair"></i>
                    <span class="nav-text">Mesas</span>
                </button>
                <button class="nav-btn" data-tab="reports" data-tooltip="Relatórios">
                    <i class="fas fa-chart-bar"></i>
                    <span class="nav-text">Relatórios</span>
                </button>
            </nav>
        </aside>

        <!-- Sidebar Overlay for Mobile -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="dashboard-header">
                    <h2>Dashboard</h2>
                    <p>Visão geral do sistema</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-products">0</h3>
                            <p>Total de Produtos</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="sales-today">0</h3>
                            <p>Vendas Hoje</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-warehouse"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-stock">0</h3>
                            <p>Itens em Estoque</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-revenue">R$ 0,00</h3>
                            <p>Faturamento Total</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Produtos Mais Vendidos</h3>
                        <div class="chart-container">
                            <table class="data-table" id="top-products-table">
                                <thead>
                                    <tr>
                                        <th>Produto</th>
                                        <th>Vendidos</th>
                                        <th>Receita</th>
                                    </tr>
                                </thead>
                                <tbody id="top-products-body">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h3>Produtos com Estoque Baixo</h3>
                        <div class="chart-container">
                            <div id="low-stock-list">
                                <p>Carregando...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Tab -->
            <div class="tab-content" id="products">
                <div class="tab-header">
                    <h2>Produtos</h2>
                    <button class="btn-primary" onclick="showProductModal()">
                        <i class="fas fa-plus"></i> Novo Produto
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Categoria</th>
                                <th>Fornecedor</th>
                                <th>Preço</th>
                                <th>Estoque</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="products-table-body">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Categories Tab -->
            <div class="tab-content" id="categories">
                <div class="tab-header">
                    <h2>Categorias</h2>
                    <button class="btn-primary" onclick="showCategoryModal()">
                        <i class="fas fa-plus"></i> Nova Categoria
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Descrição</th>
                                <th>Data de Criação</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="categories-table-body">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Suppliers Tab -->
            <div class="tab-content" id="suppliers">
                <div class="tab-header">
                    <h2>Fornecedores</h2>
                    <button class="btn-primary" onclick="showSupplierModal()">
                        <i class="fas fa-plus"></i> Novo Fornecedor
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Contato</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="suppliers-table-body">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sales Tab -->
            <div class="tab-content" id="sales">
                <div class="tab-header">
                    <h2>Vendas</h2>
                    <div class="header-actions">
                        <button class="btn-secondary" id="cart-btn" onclick="showCartModal()">
                            <i class="fas fa-shopping-cart"></i> Carrinho (<span id="cart-count">0</span>)
                        </button>
                        <button class="btn-primary" onclick="showSaleModal()">
                            <i class="fas fa-plus"></i> Nova Venda
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Produto</th>
                                <th>Quantidade</th>
                                <th>Preço Unit.</th>
                                <th>Total</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="sales-table-body">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tables Tab -->
            <div class="tab-content" id="tables">
                <div class="tab-header">
                    <h2>Controle de Mesas</h2>
                    <button class="btn-primary" onclick="openTableModal()">
                        <i class="fas fa-plus"></i> Nova Mesa
                    </button>
                </div>
                
                <div class="tables-grid" id="tables-grid">
                    <!-- Grid de mesas será carregado via JavaScript -->
                </div>
            </div>

            <!-- Reports Tab -->
            <div class="tab-content" id="reports">
                <div class="tab-header">
                    <h2>Relatórios</h2>
                </div>
                
                <div class="reports-container">
                    <div class="reports-tabs">
                        <button class="report-tab-btn active" data-report="occupancy">Ocupação</button>
                        <button class="report-tab-btn" data-report="waiters">Garçons</button>
                        <button class="report-tab-btn" data-report="revenue">Faturamento Mesas</button>
                        <button class="report-tab-btn" data-report="sales">Vendas Avulsas</button>
                        <button class="report-tab-btn" data-report="popular">Mais Vendidos</button>
                        <button class="report-tab-btn" data-report="comparison">Comparativo</button>
                    </div>
                    
                    <div class="report-filters">
                        <div class="filter-group">
                            <label for="reportDate">Data:</label>
                            <input type="date" id="reportDate" onchange="loadCurrentReport()">
                        </div>
                        <div class="filter-group">
                            <label for="reportPeriod">Período:</label>
                            <select id="reportPeriod" onchange="loadCurrentReport()">
                                <option value="today">Hoje</option>
                                <option value="7days" selected>Últimos 7 dias</option>
                                <option value="30days">Últimos 30 dias</option>
                                <option value="custom">Personalizado</option>
                            </select>
                        </div>
                        <button class="btn-primary" onclick="loadCurrentReport()">
                            <i class="fas fa-refresh"></i> Atualizar
                        </button>
                    </div>
                    
                    <div class="report-content" id="report-content">
                        <!-- Conteúdo dos relatórios será carregado aqui -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Novo Produto</h3>
                <button class="close-btn" onclick="closeModal('productModal')">&times;</button>
            </div>
            <form id="productForm">
                <input type="hidden" id="productId">
                <div class="form-group">
                    <label for="productName">Nome *</label>
                    <input type="text" id="productName" required>
                </div>
                <div class="form-group">
                    <label for="productDescription">Descrição</label>
                    <textarea id="productDescription" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Preço *</label>
                        <input type="number" id="productPrice" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Estoque *</label>
                        <input type="number" id="productStock" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="productCategory">Categoria</label>
                        <select id="productCategory">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="productSupplier">Fornecedor</label>
                        <select id="productSupplier">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('productModal')">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">Nova Categoria</h3>
                <button class="close-btn" onclick="closeModal('categoryModal')">&times;</button>
            </div>
            <form id="categoryForm">
                <input type="hidden" id="categoryId">
                <div class="form-group">
                    <label for="categoryName">Nome *</label>
                    <input type="text" id="categoryName" required>
                </div>
                <div class="form-group">
                    <label for="categoryDescription">Descrição</label>
                    <textarea id="categoryDescription" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('categoryModal')">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supplier Modal -->
    <div class="modal" id="supplierModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="supplierModalTitle">Novo Fornecedor</h3>
                <button class="close-btn" onclick="closeModal('supplierModal')">&times;</button>
            </div>
            <form id="supplierForm">
                <input type="hidden" id="supplierId">
                <div class="form-group">
                    <label for="supplierName">Nome *</label>
                    <input type="text" id="supplierName" required>
                </div>
                <div class="form-group">
                    <label for="supplierContact">Pessoa de Contato</label>
                    <input type="text" id="supplierContact">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="supplierEmail">Email</label>
                        <input type="email" id="supplierEmail">
                    </div>
                    <div class="form-group">
                        <label for="supplierPhone">Telefone</label>
                        <input type="tel" id="supplierPhone">
                    </div>
                </div>
                <div class="form-group">
                    <label for="supplierAddress">Endereço</label>
                    <textarea id="supplierAddress" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('supplierModal')">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Sale Modal -->
    <div class="modal" id="saleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nova Venda</h3>
                <button class="close-btn" onclick="closeModal('saleModal')">&times;</button>
            </div>
            <form id="saleForm">
                <div class="form-group">
                    <label for="saleProduct">Produto *</label>
                    <select id="saleProduct" required>
                        <option value="">Selecione...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="saleQuantity">Quantidade *</label>
                    <input type="number" id="saleQuantity" min="1" required>
                </div>
                <div class="form-group">
                    <label for="salePrice">Preço Unitário</label>
                    <input type="number" id="salePrice" step="0.01" readonly>
                </div>
                <div class="form-group">
                    <label for="saleTotal">Total</label>
                    <input type="number" id="saleTotal" step="0.01" readonly>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('saleModal')">Cancelar</button>
                    <button type="button" class="btn-warning" onclick="addToCartFromModal()">
                        <i class="fas fa-cart-plus"></i> Adicionar ao Carrinho
                    </button>
                    <button type="submit" class="btn-primary">Realizar Venda</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Table Modal -->
    <div class="modal" id="tableModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="tableModalTitle">Nova Mesa</h3>
                <button class="close-btn" onclick="closeModal('tableModal')">&times;</button>
            </div>
            <form id="tableForm">
                <input type="hidden" id="tableId">
                <div class="form-group">
                    <label for="tableName">Nome/Identificação da Mesa *</label>
                    <input type="text" id="tableName" required>
                </div>
                <div class="form-group">
                    <label for="tableNumber">Número da Mesa *</label>
                    <input type="text" id="tableNumber" required>
                </div>
                <div class="form-group">
                    <label for="tableCapacity">Capacidade *</label>
                    <input type="number" id="tableCapacity" min="1" value="4" required>
                </div>
                <div class="form-group">
                    <label for="tableDescription">Descrição</label>
                    <textarea id="tableDescription" rows="3" placeholder="Informações adicionais sobre a mesa"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('tableModal')">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Abrir Mesa -->
    <div class="modal" id="openTableModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Abrir Mesa</h3>
                <button class="close-btn" onclick="closeModal('openTableModal')">&times;</button>
            </div>
            <form id="openTableForm">
                <input type="hidden" id="openTableId">
                <div class="form-group">
                    <label for="customerName">Nome do Cliente Principal</label>
                    <input type="text" id="customerName" placeholder="Digite o nome do cliente principal" required>
                </div>
                <div class="form-group">
                    <label for="commandCount">Número de Comandas</label>
                    <select id="commandCount" onchange="updateCommandFields()" required>
                        <option value="">Selecione o número de comandas</option>
                        <option value="1">1 Comanda</option>
                        <option value="2">2 Comandas</option>
                        <option value="3">3 Comandas</option>
                        <option value="4">4 Comandas</option>
                        <option value="5">5 Comandas</option>
                        <option value="6">6 Comandas</option>
                    </select>
                </div>
                <div id="additionalCommands" style="display: none;">
                    <div class="commands-header">
                        <h4>Nomes das Comandas Adicionais</h4>
                        <p class="help-text">A primeira comanda será do cliente principal</p>
                    </div>
                    <div id="commandFields">
                        <!-- Campos adicionais de comandas serão inseridos aqui -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('openTableModal')">Cancelar</button>
                    <button type="submit" class="btn-primary">Abrir Mesa</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Fechar Mesa -->
    <div class="modal" id="closeTableModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Fechar Mesa</h3>
                <button class="close-btn" onclick="closeModal('closeTableModal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="closeTableId">
                <p>Deseja realmente fechar esta mesa?</p>
                <div class="table-info" id="closeTableInfo">
                    <!-- Informações da mesa serão carregadas aqui -->
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" onclick="closeModal('closeTableModal')">Cancelar</button>
                <button type="button" class="btn-danger" onclick="confirmCloseTable()">Fechar Mesa</button>
            </div>
        </div>
    </div>

    <!-- Report Modal -->
    <div class="modal" id="reportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Novo Relatório</h3>
                <button class="close-btn" onclick="closeModal('reportModal')">&times;</button>
            </div>
            <form id="reportForm">
                <input type="hidden" id="reportId">
                <div class="form-group">
                    <label for="reportDate">Data *</label>
                    <input type="date" id="reportDate" required>
                </div>
                <div class="form-group">
                    <label for="reportDescription">Descrição</label>
                    <textarea id="reportDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="reportType">Tipo</label>
                    <select id="reportType">
                        <option value="">Selecione...</option>
                        <option value="venda">Venda</option>
                        <option value="estoque">Estoque</option>
                        <option value="financeiro">Financeiro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="reportValue">Valor</label>
                    <input type="number" id="reportValue" step="0.01">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('reportModal')">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Gerenciar Pedido -->
    <div class="modal large-modal" id="manageOrderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Gerenciar Pedido - Mesa <span id="orderTableNumber"></span></h3>
                <button class="close-btn" onclick="closeModal('manageOrderModal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="currentOrderId">
                
                <!-- Informações do Pedido -->
                <div class="order-info">
                    <div class="info-row">
                        <span><strong>Cliente Principal:</strong> <span id="orderCustomerName"></span></span>
                        <span><strong>Aberto em:</strong> <span id="orderOpenedAt"></span></span>
                    </div>
                    <div id="commandsInfo" class="commands-info" style="display: none;">
                        <h4>Comandas da Mesa</h4>
                        <div id="commandsList" class="commands-list">
                            <!-- Lista de comandas será inserida aqui -->
                        </div>
                    </div>
                </div>
                
                <!-- Adicionar Itens -->
                <div class="add-item-section">
                    <h4>Adicionar Item</h4>
                    <div class="add-item-form">
                        <select id="itemProduct">
                            <option value="">Selecione um produto</option>
                        </select>
                        <input type="number" id="itemQuantity" placeholder="Qtd" min="1" value="1">
                        <select id="itemCommand" style="display: none;">
                            <option value="">Selecione a comanda</option>
                        </select>
                        <button class="btn-primary" onclick="addItemToOrder()">
                            <i class="fas fa-plus"></i> Adicionar
                        </button>
                    </div>
                </div>
                
                <!-- Lista de Itens -->
                <div class="order-items">
                    <h4>Itens do Pedido</h4>
                    <table class="order-items-table">
                        <thead>
                            <tr>
                                <th>Comanda</th>
                                <th>Produto</th>
                                <th>Qtd</th>
                                <th>Preço Unit.</th>
                                <th>Subtotal</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="orderItemsList">
                        </tbody>
                    </table>
                </div>
                
                <!-- Total -->
                <div class="order-total">
                    <h3>Total: R$ <span id="orderTotal">0.00</span></h3>
                </div>
            </div>
            <div class="order-actions-modern">
                <button type="button" class="btn-secondary" onclick="closeModal('manageOrderModal')">Fechar</button>
                <button type="button" class="btn-success" onclick="showPaymentModal()">Finalizar Pedido</button>
            </div>
        </div>
    </div>

    <!-- Modal para Pagamento -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Processar Pagamento</h3>
                <button class="close-btn" onclick="closeModal('paymentModal')">&times;</button>
            </div>
            <form id="paymentForm">
                <input type="hidden" id="paymentOrderId">
                
                <div class="payment-summary">
                    <h4>Resumo do Pedido</h4>
                    <p><strong>Mesa:</strong> <span id="paymentTableNumber"></span></p>
                    <p><strong>Total:</strong> R$ <span id="paymentTotal">0.00</span></p>
                </div>
                
                <div class="form-group">
                    <label for="paymentMethod">Método de Pagamento</label>
                    <select id="paymentMethod" required>
                        <option value="">Selecione o método</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="discount">Desconto (R$)</label>
                        <input type="number" id="discount" step="0.01" min="0" value="0" onchange="calculatePayment()">
                    </div>
                    <div class="form-group">
                        <label for="finalAmount">Valor Final</label>
                        <input type="number" id="finalAmount" step="0.01" readonly>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="amountPaid">Valor Pago</label>
                    <input type="number" id="amountPaid" step="0.01" required onchange="calculatePayment()">
                </div>
                
                <div class="payment-details" id="paymentDetails" style="display: none;">
                    <p><strong>Troco:</strong> R$ <span id="changeAmount">0.00</span></p>
                    <p><strong>Taxa:</strong> R$ <span id="feeAmount">0.00</span></p>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('paymentModal')">Cancelar</button>
                    <button type="submit" class="btn-success">Processar Pagamento</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Editar Comanda do Item -->
    <div class="modal" id="editItemCommandModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Comanda do Item</h3>
                <button class="close-btn" onclick="closeModal('editItemCommandModal')">&times;</button>
            </div>
            <form id="editItemCommandForm">
                <input type="hidden" id="editItemId">
                <div class="form-group">
                    <label for="editItemName">Item:</label>
                    <input type="text" id="editItemName" readonly>
                </div>
                <div class="form-group">
                    <label for="editItemCommandSelect">Nova Comanda:</label>
                    <select id="editItemCommandSelect" required>
                        <option value="">Selecione a comanda</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('editItemCommandModal')">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cartModal">
        <div class="modal-content cart-modal">
            <div class="modal-header">
                <h3>Carrinho de Compras</h3>
                <button class="close-btn" onclick="closeModal('cartModal')">&times;</button>
            </div>
            
            <div class="cart-content">
                <div class="cart-items" id="cartList">
                    <!-- Items do carrinho serão inseridos aqui -->
                </div>
                
                <div class="cart-totals">
                    <div class="total-line">
                        <span>Subtotal:</span>
                        <span id="cartSubtotal">R$ 0,00</span>
                    </div>
                    <div class="total-line">
                        <span>Taxa (%)</span>
                        <input type="number" id="interestRate" value="0" min="0" max="100" step="0.1">
                    </div>
                    <div class="total-line">
                        <span>Taxa (R$):</span>
                        <span id="cartTax">R$ 0,00</span>
                    </div>
                    <div class="total-line total-final">
                        <span><strong>Total:</strong></span>
                        <span id="cartTotal"><strong>R$ 0,00</strong></span>
                    </div>
                </div>
                
                <div class="payment-section">
                    <h4>Forma de Pagamento</h4>
                    <div class="payment-methods">
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="dinheiro">
                            <span>Dinheiro</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="pix">
                            <span>PIX</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="debit">
                            <span>Cartão de Débito</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="credit">
                            <span>Cartão de Crédito</span>
                        </label>
                    </div>
                    
                    <div id="cardDetails" style="display: none;">
                        <div class="form-group">
                            <label for="cardBrand">Bandeira do Cartão</label>
                            <select id="cardBrand">
                                <option value="">Selecione...</option>
                                <option value="visa">Visa</option>
                                <option value="mastercard">Mastercard</option>
                                <option value="elo">Elo</option>
                                <option value="amex">American Express</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="cart-actions">
                    <button type="button" class="btn-danger" onclick="clearCart()">
                        <i class="fas fa-trash"></i> Limpar Carrinho
                    </button>
                    <button type="button" class="btn-success" id="finalizeSaleBtn" onclick="finalizeSale()" disabled>
                        <i class="fas fa-check"></i> Finalizar Venda
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
